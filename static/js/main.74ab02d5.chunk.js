(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{15:function(e,a,t){},16:function(e,a,t){},18:function(e,a,t){"use strict";t.r(a);var r=t(2),n=t.n(r),i=t(9),c=t.n(i),s=(t(15),t(7)),o=(t(16),t(6)),p=t(3),u=t(0),l=t(10),b={placeShip:function(e,a){var t,r=Object(o.a)(a),n=Object(l.a)(e.data.positions);try{for(n.s();!(t=n.n()).done;){var i=t.value;r[i]=Object(u.a)(Object(u.a)({},a[i]),{},{ship:e.data.name})}}catch(c){n.e(c)}finally{n.f()}return r}},h=function(e){return{isSunk:function(){return e.positions.every((function(a){return e.hits.includes(a)}))},getLength:function(){return e.positions.length},isVertical:function(){return e.isVertical}}},m=function(e,a){var t={name:e,positions:a};return Object(u.a)(Object(u.a)({data:t},function(e){return{hit:function(a){e.hits.push(a),e.isSunk=h(e).isSunk()}}}(t)),h(t))},d=function(e,a){switch(a.id){case"PLACE_SHIP":var t=a.name,r=a.coordinates,n=m(t,r),i=Object(u.a)(Object(u.a)({},e.players[a.player].ships),{},Object(p.a)({},n.data.name,{name:t,health:r.length})),c=b.placeShip(n,e.players[a.player].board);return Object(u.a)(Object(u.a)({},e),{},{players:Object(u.a)(Object(u.a)({},e.players),{},Object(p.a)({},a.player,Object(u.a)(Object(u.a)({},e.players[a.player]),{},{board:c,ships:i})))});case"ATTACK_SQUARE":var s=a.opponent,l=a.coordinate,h=Object(o.a)(e.players[s].board);return h[l].shot=!0,Object(u.a)(Object(u.a)({},e),{},{players:Object(u.a)(Object(u.a)({},e.players),{},Object(p.a)({},s,Object(u.a)(Object(u.a)({},e.players[s]),{},{board:h})))});case"ATTACK_SHIP":var d=a.opponent,j=a.coordinate,O=e.players[d].board[j].ship,y=e.players[d].ships[O],S=Object(u.a)(Object(u.a)({},e.players[d].ships),{},Object(p.a)({},O,Object(u.a)(Object(u.a)({},y),{},{health:y.health-1})));return 0===S[O].health&&(S[O].isSunk=!0),Object(u.a)(Object(u.a)({},e),{},{players:Object(u.a)(Object(u.a)({},e.players),{},Object(p.a)({},d,Object(u.a)(Object(u.a)({},e.players[d]),{},{ships:S})))});case"SEND_MESSAGE":return Object(u.a)(Object(u.a)({},e),{},{message:a.message});case"SUNK_MESSAGE_SENT":var f=a.player,E=a.shipKey,A=e.players[f].ships[E],g=Object(u.a)(Object(u.a)({},e.players[f].ships),{},Object(p.a)({},E,Object(u.a)(Object(u.a)({},A),{},{messageSent:!0})));return Object(u.a)(Object(u.a)({},e),{},{players:Object(u.a)(Object(u.a)({},e.players),{},Object(p.a)({},f,Object(u.a)(Object(u.a)({},e.players[f]),{},{ships:g})))});case"UPDATE_REMAINING_SHIPS":var v=a.player,P=a.value;return Object(u.a)(Object(u.a)({},e),{},{players:Object(u.a)(Object(u.a)({},e.players),{},Object(p.a)({},v,Object(u.a)(Object(u.a)({},e.players[v]),{},{remainingShips:e.players[v].remainingShips+P})))});case"UPDATE_WINNER":return Object(u.a)(Object(u.a)({},e),{},{winner:a.winner});default:console.log("BAD ACTION ID"),console.error("BAD ACTION ID")}},j=t(1),O=function(e){var a=e.clickable,t=e.attack,r=e.coordinate,n=e.position,i=e.ships,c=e.hideShips,s=n.shot,o=n.ship,p={};return o?o&&(p.backgroundColor=c?"white":"blue",s&&(p.backgroundColor="red",i[o].isSunk&&(p.backgroundColor="black"))):p.backgroundColor=s?"gray":"white",(!1===a||s)&&(p.pointerEvents="none"),Object(j.jsx)("button",{className:"square",style:p,onClick:function(){return t(r)}})},y=function(e){return Object(j.jsx)("div",{className:"board",children:Array(10).fill(null).map((function(a,t){return function(a){var t=10*a,r=Array(10).fill(null).map((function(a,r){var n=t+r;return Object(j.jsx)(O,{coordinate:n,attack:e.attack,clickable:e.clickable,ships:e.ships,position:e.gameboard[n],hideShips:e.hideShips},n)}));return Object(j.jsx)("div",{className:"board-row",children:r},a)}(t)}))})},S=Object(r.memo)(y),f=function(e){var a={name:e};return Object(u.a)(Object(u.a)({data:a},{attack:function(e,a){if(!0!==e.board[a].shot)return e.recieveAttack(a)}}),{computerAttack:function(e){var a=[];for(var t in e.board)e.board[t].shot||a.push(Number(t));var r=a[Math.floor(Math.random()*a.length)];return[function(e,a){if(!0!==e.board[a].shot)return e.recieveAttack(a)}(e,r),r]},randomOpenSpot:function(e){var a=[];for(var t in e)e[t].shot||a.push(Number(t));return a[Math.floor(Math.random()*a.length)]}})},E=function(){var e=Object(r.useState)(0),a=Object(s.a)(e,2),t=a[0],n=a[1],i=Object(r.useState)(!0),c=Object(s.a)(i,2),o=c[0],p=c[1],u=Object(r.useReducer)(d,{players:{computer:{name:"HAL900",board:Array(100).fill(null).map((function(e,a){return{shot:!1,ship:!1}})),ships:{},remainingShips:0},human:{name:"Joel",board:Array(100).fill(null).map((function(e,a){return{shot:!1,ship:!1}})),ships:{},remainingShips:0}},message:"Click on your opponents board to begin!",winner:""}),l=Object(s.a)(u,2),b=l[0],h=l[1],m=function(e,a){var t="computer"===e?"Sank enemy ".concat(a):"They sank my ".concat(a);h({id:"UPDATE_REMAINING_SHIPS",player:e,value:-1}),h({id:"SEND_MESSAGE",message:t}),h({id:"SUNK_MESSAGE_SENT",player:e,shipKey:a})},O=function(e,a){var t="computer"===e?"Hit Enemy Ship!":"Enemy hit my Ship!";h({id:"ATTACK_SQUARE",coordinate:a,opponent:e}),b.players.computer.board[a].ship?(h({id:"SEND_MESSAGE",message:t}),h({id:"ATTACK_SHIP",coordinate:a,opponent:e})):h({id:"SEND_MESSAGE",message:"Miss!"})};return Object(r.useEffect)((function(){!1===b.players.computer.board[0].ship&&(h({id:"PLACE_SHIP",player:"computer",name:"Carrier",coordinates:[0,1,2,3,4]}),h({id:"PLACE_SHIP",player:"computer",name:"Battleship",coordinates:[42,43,44,45]}),h({id:"PLACE_SHIP",player:"computer",name:"Destoyer",coordinates:[96,97,98]}),h({id:"PLACE_SHIP",player:"computer",name:"Submarine",coordinates:[64,65,66]}),h({id:"PLACE_SHIP",player:"computer",name:"Patrol Boat",coordinates:[22,23]}),h({id:"UPDATE_REMAINING_SHIPS",player:"computer",value:5}),h({id:"PLACE_SHIP",player:"human",name:"Carrier",coordinates:[0,1,2,3,4]}),h({id:"PLACE_SHIP",player:"human",name:"Battleship",coordinates:[42,43,44,45]}),h({id:"PLACE_SHIP",player:"human",name:"Destoyer",coordinates:[96,97,98]}),h({id:"PLACE_SHIP",player:"human",name:"Submarine",coordinates:[64,65,66]}),h({id:"PLACE_SHIP",player:"human",name:"Patrol Boat",coordinates:[22,23]}),h({id:"UPDATE_REMAINING_SHIPS",player:"human",value:5}))}),[]),Object(r.useEffect)((function(){for(var e in console.log("fired twice"),b.players.computer.ships){var a=b.players.computer.ships[e];a.isSunk&&!a.messageSent&&m("computer",e)}}),[b.players.computer.ships]),Object(r.useEffect)((function(){for(var e in b.players.human.ships){var a=b.players.human.ships[e];a.isSunk&&!a.messageSent&&m("human",e)}}),[b.players.human.ships]),Object(r.useEffect)((function(){if(!(t<1||b.winner)){var e=f().randomOpenSpot(b.players.human.board);O("human",e)}}),[t]),Object(r.useEffect)((function(){if(!(t<1||b.winner)){var e=b.players.computer.remainingShips,a=b.players.human.remainingShips;if(0===e||0===a){var r=e?"computer":"human";h({id:"UPDATE_WINNER",winner:r}),h({id:"SEND_MESSAGE",message:"".concat(r," wins!")})}}}),[b.players.computer.remainingShips,b.players.human.remainingShips]),Object(j.jsxs)("div",{children:[Object(j.jsx)("p",{children:b.message}),Object(j.jsx)(S,{gameboard:b.players.human.board,ships:b.players.human.ships,clickable:!1}),Object(j.jsx)(S,{gameboard:b.players.computer.board,attack:function(e){b.winner||(O("computer",e),p(!1),setTimeout((function(){p(!0),n((function(e){return e+1}))}),1e3))},ships:b.players.computer.ships,clickable:o,hideShips:!0})]})},A=function(){return Object(j.jsx)("div",{className:"App",children:Object(j.jsx)(E,{})})},g=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,19)).then((function(a){var t=a.getCLS,r=a.getFID,n=a.getFCP,i=a.getLCP,c=a.getTTFB;t(e),r(e),n(e),i(e),c(e)}))};c.a.render(Object(j.jsx)(n.a.StrictMode,{children:Object(j.jsx)(A,{})}),document.getElementById("root")),g()}},[[18,1,2]]]);
//# sourceMappingURL=main.74ab02d5.chunk.js.map