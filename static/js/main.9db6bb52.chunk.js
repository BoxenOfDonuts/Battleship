(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),i=a(10),s=a.n(i),c=(a(15),a(0)),o=a(4),l=(a(16),[{name:"Carrier",length:5},{name:"Battleship",length:4},{name:"Destroyer",length:3},{name:"Submarine",length:3},{name:"Patrol Boat",length:2}]),u=(a(17),a(1)),h=function(e){var t=e.handleClick,a=e.handleHover,n=e.isHovering,r=void 0===n?[]:n,i=e.coordinate,s=e.position,c=e.ships,o=e.hideShips,l=s.shot,h=s.ship,p="square",b="",d=Object(u.jsx)("svg",{height:"40",width:"40",children:Object(u.jsx)("circle",{cx:"20",cy:"20",r:"12",stroke:"black",strokeWidth:"1",fill:"red"})}),j=Object(u.jsx)("svg",{height:"40",width:"40",children:Object(u.jsx)("circle",{cx:"20",cy:"20",r:"12",stroke:"black",strokeWidth:"1",fill:"white"})});r&&(p+=r.includes(i)?" hover-ship":""),p+=l?" no-click":"",h?(p+=o&&!c[h].isSunk?" hidden":" ship",p+=c[h].isSunk?" sunk":"",b=l?d:"",c[h].leftEdge.includes(i)&&(p+=" left-edge"),c[h].rightEdge.includes(i)&&(p+=" right-edge")):b=l?j:"";return Object(u.jsx)("div",{className:p,onMouseEnter:function(){a&&a(i)},onClick:function(){return t(i)},children:b})},p=function(e){var t="board";t+=e.clickable?"":" no-click";return Object(u.jsx)("div",{className:t,children:Array(10).fill(null).map((function(t,a){return function(t){var a=10*t,n=Array(10).fill(null).map((function(t,n){var r=a+n;return Object(u.jsx)(h,{coordinate:r,handleClick:e.onClick,clickable:e.clickable,ships:e.ships,position:e.gameboard[r],hideShips:e.hideShips,handleHover:e.onHover,isHovering:e.isHovering},r)}));return Object(u.jsx)("div",{className:"board-row",children:n},t)}(a)}))})},b=Object(n.memo)(p),d=a(9),j=a(7),O=function(){var e=function(e,t){var a=e[0],n=e[e.length-1];if(a%10===9&&a%10!==n%10||n%10<a%10||n>99)return!1;var r=[];t.forEach((function(e,t){e.ship&&(r.push(t,t-10,t+10),t%10!==9&&r.push(t+1,t+11,t-9),t%10!==0&&r.push(t-1,t-11,t+9))}));var i,s=Object(d.a)(e);try{for(s.s();!(i=s.n()).done;){var c=i.value;if(r.includes(c))return!1}}catch(o){s.e(o)}finally{s.f()}return!0},t=function(e,t,a){return!(t+a>99||t+a<0)&&(!e[t+a].shot&&((t%10!==0||-1!==a)&&(t%10!==9||1!==a)))},a=function(e){var t=[];for(var a in e)e[a].shot||t.push(Number(a));return t[Math.floor(Math.random()*t.length)]};return{placeShip:function(e,t){var a,n=Object(j.a)(t),r=Object(d.a)(e.data.positions);try{for(r.s();!(a=r.n()).done;){var i=a.value;n[i]=Object(c.a)(Object(c.a)({},t[i]),{},{ship:e.data.name})}}catch(s){r.e(s)}finally{r.f()}return n},validPlacement:e,randomCoordinates:function(t,a){for(var n=0,r=function(e){for(var t=Math.floor(98*Math.random()),a=[1,10][Math.floor(2*Math.random())],n=[t],r=1;r<e.length;r++)n.push(t+r*a);return n},i=r(t);!e(i,a)&&n<11;)i=r(t),n++;return i},determineGuessDirection:function(e,n,r,i){var s=r[r.length-1];if(n&&t(e,r[0],i))return[i,r[0]+i];if(r.length>0){if(t(e,s,1))return[1,s+1];if(t(e,s,10))return[10,s+10];if(t(e,s,-10))return[-10,s-10]}return[-1,a(e)]}}}(),f=(a(19),function(e){var t=e.header,a=Array.from(t).map((function(e,t){return Object(u.jsx)("span",{children:e},e+t)}));return Object(u.jsx)("div",{className:"header",children:Object(u.jsx)("h1",{children:a})})}),m=(a(20),function(e){var t=e.message;return Object(u.jsx)("div",{className:"messages",children:Object(u.jsx)("p",{children:t})})}),S=a(3),y=function(e){return{isSunk:function(){return e.positions.every((function(t){return e.hits.includes(t)}))},getLength:function(){return e.positions.length},isVertical:function(){return e.isVertical}}},v=function(e,t){var a={name:e,positions:t};return Object(c.a)(Object(c.a)({data:a},function(e){return{hit:function(t){e.hits.push(t),e.isSunk=y(e).isSunk()}}}(a)),y(a))},g=function(e,t){switch(t.id){case"PLACE_SHIP":var a=t.name,n=t.coordinates,r=t.isVertical,i=v(a,n),s="",o="";r?(s=n,o=n):(s=[n[0]],o=[n[n.length-1]]);var l=Object(c.a)(Object(c.a)({},e.players[t.player].ships),{},Object(S.a)({},i.data.name,{name:a,health:n.length,leftEdge:s,rightEdge:o})),u=O.placeShip(i,e.players[t.player].board);return Object(c.a)(Object(c.a)({},e),{},{players:Object(c.a)(Object(c.a)({},e.players),{},Object(S.a)({},t.player,Object(c.a)(Object(c.a)({},e.players[t.player]),{},{board:u,ships:l})))});case"ATTACK_SQUARE":var h=t.opponent,p=t.coordinate,b=Object(j.a)(e.players[h].board);return b[p].shot=!0,Object(c.a)(Object(c.a)({},e),{},{players:Object(c.a)(Object(c.a)({},e.players),{},Object(S.a)({},h,Object(c.a)(Object(c.a)({},e.players[h]),{},{board:b})))});case"ATTACK_SHIP":var d=t.opponent,f=t.coordinate,m=e.players[d].board[f].ship,y=e.players[d].ships[m],g=Object(c.a)(Object(c.a)({},e.players[d].ships),{},Object(S.a)({},m,Object(c.a)(Object(c.a)({},y),{},{health:y.health-1})));return 0===g[m].health&&(g[m].isSunk=!0),Object(c.a)(Object(c.a)({},e),{},{players:Object(c.a)(Object(c.a)({},e.players),{},Object(S.a)({},d,Object(c.a)(Object(c.a)({},e.players[d]),{},{ships:g})))});case"SEND_MESSAGE":return Object(c.a)(Object(c.a)({},e),{},{message:t.message});case"SUNK_MESSAGE_SENT":var A=t.player,k=t.shipKey,N=e.players[A].ships[k],_=Object(c.a)(Object(c.a)({},e.players[A].ships),{},Object(S.a)({},k,Object(c.a)(Object(c.a)({},N),{},{messageSent:!0})));return Object(c.a)(Object(c.a)({},e),{},{players:Object(c.a)(Object(c.a)({},e.players),{},Object(S.a)({},A,Object(c.a)(Object(c.a)({},e.players[A]),{},{ships:_})))});case"UPDATE_REMAINING_SHIPS":var T=t.player,x=t.value;return Object(c.a)(Object(c.a)({},e),{},{players:Object(c.a)(Object(c.a)({},e.players),{},Object(S.a)({},T,Object(c.a)(Object(c.a)({},e.players[T]),{},{remainingShips:e.players[T].remainingShips+x})))});case"UPDATE_WINNER":return Object(c.a)(Object(c.a)({},e),{},{winner:t.winner});case"GAME_START":return Object(c.a)(Object(c.a)({},e),{},{started:t.started});case"RESET":return E();default:console.log("BAD ACTION ID"),console.error("BAD ACTION ID")}},E=function(){return{players:{computer:{name:"HAL900",board:Array(100).fill(null).map((function(e,t){return{shot:!1,ship:!1}})),ships:{},remainingShips:0},human:{name:"Player",board:Array(100).fill(null).map((function(e,t){return{shot:!1,ship:!1}})),ships:{},remainingShips:0}},message:"Click on the board to place your ships",winner:"",started:!1}},A=function(){var e=Object(n.useState)(0),t=Object(o.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)(!0),s=Object(o.a)(i,2),h=s[0],p=s[1],d=Object(n.useState)(l),j=Object(o.a)(d,2),f=j[0],S=j[1],y=Object(n.useState)([]),v=Object(o.a)(y,2),A=v[0],k=v[1],N=Object(n.useState)(!1),_=Object(o.a)(N,2),T=_[0],x=_[1],I=Object(n.useState)({hit:!1,positions:[],direction:-1}),C=Object(o.a)(I,2),P=C[0],M=C[1],D=Object(n.useReducer)(g,E(),E),H=Object(o.a)(D,2),G=H[0],w=H[1],R=function(e,t){var a="computer"===e?"Sank enemy ".concat(t):"They sank my ".concat(t);w({id:"UPDATE_REMAINING_SHIPS",player:e,value:-1}),w({id:"SEND_MESSAGE",message:a}),w({id:"SUNK_MESSAGE_SENT",player:e,shipKey:t})},U=function(e,t){var a="computer"===e?"Hit Enemy Ship!":"Enemy hit my Ship!";if(w({id:"ATTACK_SQUARE",coordinate:t,opponent:e}),G.players[e].board[t].ship){if("human"===e){var n=P.positions;P.direction,n.unshift(t),M(Object(c.a)(Object(c.a)({},P),{},{hit:!0,positions:n}))}w({id:"SEND_MESSAGE",message:a}),w({id:"ATTACK_SHIP",coordinate:t,opponent:e})}else w({id:"SEND_MESSAGE",message:"Miss!"}),"human"===e&&M(Object(c.a)(Object(c.a)({},P),{},{hit:!1}))};Object(n.useEffect)((function(){if(!G.started&&0!==f.length){var e=f[0],t=O.randomCoordinates(e,G.players.computer.board),a=t[0]-t[1]!==1;w({id:"PLACE_SHIP",player:"computer",name:e.name,coordinates:t,isVertical:a}),w({id:"UPDATE_REMAINING_SHIPS",player:"computer",value:1})}}),[f]),Object(n.useEffect)((function(){for(var e in G.players.computer.ships){var t=G.players.computer.ships[e];t.isSunk&&!t.messageSent&&R("computer",e)}}),[G.players.computer.ships]),Object(n.useEffect)((function(){for(var e in G.players.human.ships){var t=G.players.human.ships[e];t.isSunk&&!t.messageSent&&(R("human",e),M({hit:!1,positions:[],direction:-1}))}}),[G.players.human.ships]),Object(n.useEffect)((function(){if(G.started&&!G.winner){var e=O.determineGuessDirection(G.players.human.board,P.hit,P.positions,P.direction),t=Object(o.a)(e,2),a=t[0],n=t[1];U("human",n),M((function(e){return Object(c.a)(Object(c.a)({},e),{},{direction:a})}))}}),[a]),Object(n.useEffect)((function(){if(!(a<1||G.winner)){var e=G.players.computer.remainingShips,t=G.players.human.remainingShips;if(0===e||0===t){var n=e?"computer":"human";w({id:"UPDATE_WINNER",winner:n}),w({id:"SEND_MESSAGE",message:"".concat(n," wins!")})}}}),[G.players.computer.remainingShips,G.players.human.remainingShips]);var K="";if(G.winner)K=Object(u.jsx)("button",{onClick:function(){r(0),p(!0),S(l),M({hit:!1,positions:[],direction:-1}),w({id:"RESET"})},children:"Replay?"});else if(!G.started){var B=T?"Horizontal":"Vertical";K=Object(u.jsx)("button",{onClick:function(){return x(!T)},children:B})}return Object(u.jsxs)("div",{className:"game",children:[Object(u.jsx)(m,{message:G.message}),Object(u.jsxs)("div",{className:"gameboard",children:[Object(u.jsx)(b,{gameboard:G.players.human.board,ships:G.players.human.ships,clickable:!G.started,onClick:function(e){if(!G.started){for(var t=f.slice(1,f.length),a=f[0],n=[e],r=T?10:1,i=1;i<a.length;i++)n.push(e+i*r);O.validPlacement(n,G.players.human.board)&&(S(t),w({id:"PLACE_SHIP",player:"human",name:a.name,coordinates:n,isVertical:T}),w({id:"UPDATE_REMAINING_SHIPS",player:"human",value:1}),0===t.length&&(w({id:"GAME_START",started:!0}),w({id:"SEND_MESSAGE",message:"Game Start!"}),k([])))}},onHover:function(e){if(!G.started){var t=f[0],a=[e],n=T?10:1;if(T)for(var r=1;r<t.length;r++)a.push(e+r*n);else for(var i=1;i<t.length&&(e+i)%10!==0;i++)a.push(e+i*n);k(a)}},isHovering:A}),G.started&&Object(u.jsx)(b,{gameboard:G.players.computer.board,ships:G.players.computer.ships,clickable:G.started&&h,onClick:function(e){G.winner||G.players.computer.board[e].shot||(U("computer",e),p(!1),setTimeout((function(){p(!0),r((function(e){return e+1}))}),1))},hideShips:!1})]}),K]})},k=function(){return Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)(f,{header:"Battleship!"}),Object(u.jsx)(A,{})]})},N=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,22)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,i=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),i(e),s(e)}))};s.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(k,{})}),document.getElementById("root")),N()}],[[21,1,2]]]);
//# sourceMappingURL=main.9db6bb52.chunk.js.map