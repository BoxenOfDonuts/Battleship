(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{17:function(e,a,t){},19:function(e,a,t){},21:function(e,a,t){"use strict";t.r(a);var r=t(1),n=t.n(r),s=t(10),c=t.n(s),i=(t(17),t(9)),o=t.n(i),p=t(11),u=t(7),l=(t(19),t(6)),b=t(3),h=t(0),m=t(12),d={placeShip:function(e,a){var t,r=Object(l.a)(a),n=Object(m.a)(e.data.positions);try{for(n.s();!(t=n.n()).done;){var s=t.value;r[s]=Object(h.a)(Object(h.a)({},a[s]),{},{ship:e.data.name})}}catch(c){n.e(c)}finally{n.f()}return r}},j=function(e){return{isSunk:function(){return e.positions.every((function(a){return e.hits.includes(a)}))},getLength:function(){return e.positions.length},isVertical:function(){return e.isVertical}}},S=function(e,a){var t={name:e,positions:a};return Object(h.a)(Object(h.a)({data:t},function(e){return{hit:function(a){e.hits.push(a),e.isSunk=j(e).isSunk()}}}(t)),j(t))},O=function(e,a){switch(a.id){case"PLACE_SHIP":var t=a.name,r=a.coordinates,n=S(t,r),s=Object(h.a)(Object(h.a)({},e.players[a.player].ships),{},Object(b.a)({},n.data.name,{name:t,health:r.length})),c=d.placeShip(n,e.players[a.player].board);return Object(h.a)(Object(h.a)({},e),{},{players:Object(h.a)(Object(h.a)({},e.players),{},Object(b.a)({},a.player,Object(h.a)(Object(h.a)({},e.players[a.player]),{},{board:c,ships:s})))});case"ATTACK_SQUARE":var i=a.opponent,o=a.coordinate,p=Object(l.a)(e.players[i].board);return p[o].shot=!0,Object(h.a)(Object(h.a)({},e),{},{players:Object(h.a)(Object(h.a)({},e.players),{},Object(b.a)({},i,Object(h.a)(Object(h.a)({},e.players[i]),{},{board:p})))});case"ATTACK_SHIP":var u=a.opponent,m=a.coordinate,j=e.players[u].board[m].ship,O=e.players[u].ships[j],y=Object(h.a)(Object(h.a)({},e.players[u].ships),{},Object(b.a)({},j,Object(h.a)(Object(h.a)({},O),{},{health:O.health-1})));return 0===y[j].health&&(y[j].isSunk=!0),Object(h.a)(Object(h.a)({},e),{},{players:Object(h.a)(Object(h.a)({},e.players),{},Object(b.a)({},u,Object(h.a)(Object(h.a)({},e.players[u]),{},{ships:y})))});case"SEND_MESSAGE":return Object(h.a)(Object(h.a)({},e),{},{message:a.message});case"SUNK_MESSAGE_SENT":var f=a.player,E=a.shipKey,A=e.players[f].ships[E];console.log(A);var g=Object(h.a)(Object(h.a)({},e.players[f].ships),{},Object(b.a)({},E,Object(h.a)(Object(h.a)({},A),{},{messageSent:!0})));return Object(h.a)(Object(h.a)({},e),{},{players:Object(h.a)(Object(h.a)({},e.players),{},Object(b.a)({},f,Object(h.a)(Object(h.a)({},e.players[f]),{},{ships:g})))});case"UPDATE_REMAINING_SHIPS":var v=a.player,_=a.value;return Object(h.a)(Object(h.a)({},e),{},{players:Object(h.a)(Object(h.a)({},e.players),{},Object(b.a)({},v,Object(h.a)(Object(h.a)({},e.players[v]),{},{remainingShips:e.players[v].remainingShips+_})))});case"UPDATE_WINNER":return Object(h.a)(Object(h.a)({},e),{},{winner:a.winner});default:console.log("BAD ACTION ID"),console.error("BAD ACTION ID")}},y=t(2),f=function(e){var a=e.clickable,t=e.attack,r=e.coordinate,n=e.position,s=e.ships,c=n.shot,i=n.ship,o={};return i?i&&(o.backgroundColor="blue",c&&(o.backgroundColor="red",s[i].isSunk&&(o.backgroundColor="black"))):o.backgroundColor=c?"gray":"white",(!1===a||c)&&(o.pointerEvents="none"),Object(y.jsx)("button",{className:"square",style:o,onClick:function(){return t(r)}})},E=function(e){return Object(y.jsx)("div",{className:"board",children:Array(10).fill(null).map((function(a,t){return function(a){var t=10*a,r=Array(10).fill(null).map((function(a,r){var n=t+r;return Object(y.jsx)(f,{coordinate:n,attack:e.attack,clickable:e.clickable,ships:e.ships,position:e.gameboard[n]},n)}));return Object(y.jsx)("div",{className:"board-row",children:r},a)}(t)}))})},A=Object(r.memo)(E),g=function(e){var a={name:e};return Object(h.a)(Object(h.a)({data:a},{attack:function(e,a){if(!0!==e.board[a].shot)return e.recieveAttack(a)}}),{computerAttack:function(e){var a=[];for(var t in e.board)e.board[t].shot||a.push(Number(t));var r=a[Math.floor(Math.random()*a.length)];return[function(e,a){if(!0!==e.board[a].shot)return e.recieveAttack(a)}(e,r),r]},randomOpenSpot:function(e){var a=[];for(var t in e)e[t].shot||a.push(Number(t));return a[Math.floor(Math.random()*a.length)]}})},v=function(){var e=Object(r.useReducer)(O,{players:{computer:{name:"HAL900",board:Array(100).fill(null).map((function(e,a){return{shot:!1,ship:!1}})),ships:{},remainingShips:0},human:{name:"Joel",board:Array(100).fill(null).map((function(e,a){return{shot:!1,ship:!1}})),ships:{},remainingShips:0}},message:"",winner:""}),a=Object(u.a)(e,2),t=a[0],n=a[1],s=Object(r.useState)(0),c=Object(u.a)(s,2),i=c[0],l=c[1],b=Object(r.useState)(!0),h=Object(u.a)(b,2),m=h[0],d=h[1],j=function(){var e=Object(p.a)(o.a.mark((function e(a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.winner){e.next=3;break}return d(!1),e.abrupt("return");case 3:n({id:"ATTACK_SQUARE",coordinate:a,opponent:"computer"}),t.players.computer.board[a].ship?(n({id:"SEND_MESSAGE",message:"Hit Enemy Ship!"}),n({id:"ATTACK_SHIP",coordinate:a,opponent:"computer"})):n({id:"SEND_MESSAGE",message:"Miss!"}),d(!1);case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){!1===t.players.computer.board[0].ship&&(n({id:"PLACE_SHIP",player:"computer",name:"Carrier",coordinates:[0,1,2,3,4]}),n({id:"PLACE_SHIP",player:"computer",name:"Battleship",coordinates:[42,43,44,45]}),n({id:"PLACE_SHIP",player:"computer",name:"Destoyer",coordinates:[96,97,98]}),n({id:"PLACE_SHIP",player:"computer",name:"Submarine",coordinates:[64,65,66]}),n({id:"PLACE_SHIP",player:"computer",name:"Patrol Boat",coordinates:[22,23]}),n({id:"UPDATE_REMAINING_SHIPS",player:"computer",value:5}),n({id:"PLACE_SHIP",player:"human",name:"Carrier",coordinates:[0,1,2,3,4]}),n({id:"PLACE_SHIP",player:"human",name:"Battleship",coordinates:[42,43,44,45]}),n({id:"PLACE_SHIP",player:"human",name:"Destoyer",coordinates:[96,97,98]}),n({id:"PLACE_SHIP",player:"human",name:"Submarine",coordinates:[64,65,66]}),n({id:"PLACE_SHIP",player:"human",name:"Patrol Boat",coordinates:[22,23]}),n({id:"UPDATE_REMAINING_SHIPS",player:"human",value:5}))}),[]),Object(r.useEffect)((function(){for(var e in t.players.computer.ships){var a=t.players.computer.ships[e];a.isSunk&&!a.messageSent&&(n({id:"UPDATE_REMAINING_SHIPS",player:"computer",value:-1}),n({id:"SEND_MESSAGE",message:"Sunk enemy ".concat(e)}),n({id:"SUNK_MESSAGE_SENT",player:"computer",shipKey:e}))}}),[t.players.computer.ships]),Object(r.useEffect)((function(){for(var e in t.players.human.ships){var a=t.players.human.ships[e];a.isSunk&&!a.messageSent&&(n({id:"UPDATE_REMAINING_SHIPS",player:"human",value:-1}),n({id:"SEND_MESSAGE",message:"They Sunk my ".concat(e)}),n({id:"SUNK_MESSAGE_SENT",player:"human",shipKey:e}))}}),[t.players.human.ships]),Object(r.useEffect)((function(){m||t.winner||setTimeout((function(){d(!0),l((function(e){return e+1}))}),1e3)}),[m]),Object(r.useEffect)((function(){if(!(i<1||t.winner)){var e=g().randomOpenSpot(t.players.human.board);n({id:"ATTACK_SQUARE",coordinate:e,opponent:"human"}),t.players.human.board[e].ship?(n({id:"SEND_MESSAGE",message:"Enemy hit my Ship!"}),n({id:"ATTACK_SHIP",coordinate:e,opponent:"human"})):n({id:"SEND_MESSAGE",message:"Miss!"})}}),[i]),Object(r.useEffect)((function(){if(!(i<1||t.winner)){var e=t.players.computer.remainingShips,a=t.players.human.remainingShips;if(console.log(e,a),0===e||0===a){var r=e?"computer":"human";n({id:"UPDATE_WINNER",winner:r}),n({id:"SEND_MESSAGE",message:"".concat(r," wins!")})}}}),[t.players.computer.remainingShips,t.players.human.remainingShips]),Object(y.jsxs)("div",{children:[Object(y.jsx)("p",{children:t.message}),Object(y.jsx)(A,{gameboard:t.players.human.board,ships:t.players.human.ships,clickable:!1}),Object(y.jsx)(A,{gameboard:t.players.computer.board,attack:j,ships:t.players.computer.ships,clickable:m})]})},_=function(){return Object(y.jsx)("div",{className:"App",children:Object(y.jsx)(v,{})})},P=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,22)).then((function(a){var t=a.getCLS,r=a.getFID,n=a.getFCP,s=a.getLCP,c=a.getTTFB;t(e),r(e),n(e),s(e),c(e)}))};c.a.render(Object(y.jsx)(n.a.StrictMode,{children:Object(y.jsx)(_,{})}),document.getElementById("root")),P()}},[[21,1,2]]]);
//# sourceMappingURL=main.bdd1ffe2.chunk.js.map