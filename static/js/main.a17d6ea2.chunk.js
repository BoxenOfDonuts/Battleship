(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{15:function(e,a,t){},16:function(e,a,t){},18:function(e,a,t){"use strict";t.r(a);var n=t(1),r=t.n(n),s=t(10),c=t.n(s),i=(t(15),t(6)),o=(t(16),[{name:"Carrier",length:5},{name:"Battleship",length:4},{name:"Destroyer",length:3},{name:"Submarine",length:3},{name:"Patrol Boat",length:2}]),u=t(7),p=t(3),l=t(0),h=t(9),b=function(e){return{isSunk:function(){return e.positions.every((function(a){return e.hits.includes(a)}))},getLength:function(){return e.positions.length},isVertical:function(){return e.isVertical}}},d=function(e,a){var t={name:e,positions:a};return Object(l.a)(Object(l.a)({data:t},function(e){return{hit:function(a){e.hits.push(a),e.isSunk=b(e).isSunk()}}}(t)),b(t))},m=function(){var e=function(e,a){var t=e[0],n=e[e.length-1];if(t%10===9||n%10<t%10)return!1;var r=[];a.forEach((function(e,a){e.ship&&(r.push(a,a-10,a+10),a%10!==9&&r.push(a+1,a+11,a-9),a%10!==0&&r.push(a-1,a-11,a+9))}));var s,c=Object(h.a)(e);try{for(c.s();!(s=c.n()).done;){var i=s.value;if(r.includes(i))return!1}}catch(o){c.e(o)}finally{c.f()}return!0};return{placeShip:function(e,a){var t,n=Object(u.a)(a),r=Object(h.a)(e.data.positions);try{for(r.s();!(t=r.n()).done;){var s=t.value;n[s]=Object(l.a)(Object(l.a)({},a[s]),{},{ship:e.data.name})}}catch(c){r.e(c)}finally{r.f()}return n},validPlacement:e,randomCoordinates:function(a,t){for(var n=function(e){for(var a=Math.floor(98*Math.random()),t=[a],n=1;n<e.length;n++)t.push(a+n);return t},r=n(a);!e(r,t);)r=n(a);return r}}}(),j=function(e,a){switch(a.id){case"PLACE_SHIP":var t=a.name,n=a.coordinates,r=d(t,n),s=Object(l.a)(Object(l.a)({},e.players[a.player].ships),{},Object(p.a)({},r.data.name,{name:t,health:n.length})),c=m.placeShip(r,e.players[a.player].board);return Object(l.a)(Object(l.a)({},e),{},{players:Object(l.a)(Object(l.a)({},e.players),{},Object(p.a)({},a.player,Object(l.a)(Object(l.a)({},e.players[a.player]),{},{board:c,ships:s})))});case"ATTACK_SQUARE":var i=a.opponent,o=a.coordinate,h=Object(u.a)(e.players[i].board);return h[o].shot=!0,Object(l.a)(Object(l.a)({},e),{},{players:Object(l.a)(Object(l.a)({},e.players),{},Object(p.a)({},i,Object(l.a)(Object(l.a)({},e.players[i]),{},{board:h})))});case"ATTACK_SHIP":var b=a.opponent,j=a.coordinate,O=e.players[b].board[j].ship,f=e.players[b].ships[O],S=Object(l.a)(Object(l.a)({},e.players[b].ships),{},Object(p.a)({},O,Object(l.a)(Object(l.a)({},f),{},{health:f.health-1})));return 0===S[O].health&&(S[O].isSunk=!0),Object(l.a)(Object(l.a)({},e),{},{players:Object(l.a)(Object(l.a)({},e.players),{},Object(p.a)({},b,Object(l.a)(Object(l.a)({},e.players[b]),{},{ships:S})))});case"SEND_MESSAGE":return Object(l.a)(Object(l.a)({},e),{},{message:a.message});case"SUNK_MESSAGE_SENT":var y=a.player,v=a.shipKey,g=e.players[y].ships[v],E=Object(l.a)(Object(l.a)({},e.players[y].ships),{},Object(p.a)({},v,Object(l.a)(Object(l.a)({},g),{},{messageSent:!0})));return Object(l.a)(Object(l.a)({},e),{},{players:Object(l.a)(Object(l.a)({},e.players),{},Object(p.a)({},y,Object(l.a)(Object(l.a)({},e.players[y]),{},{ships:E})))});case"UPDATE_REMAINING_SHIPS":var A=a.player,k=a.value;return Object(l.a)(Object(l.a)({},e),{},{players:Object(l.a)(Object(l.a)({},e.players),{},Object(p.a)({},A,Object(l.a)(Object(l.a)({},e.players[A]),{},{remainingShips:e.players[A].remainingShips+k})))});case"UPDATE_WINNER":return Object(l.a)(Object(l.a)({},e),{},{winner:a.winner});case"GAME_START":return Object(l.a)(Object(l.a)({},e),{},{started:a.started});default:console.log("BAD ACTION ID"),console.error("BAD ACTION ID")}},O=t(2),f=function(e){var a=e.clickable,t=e.handleClick,n=e.coordinate,r=e.position,s=e.ships,c=e.hideShips,i=r.shot,o=r.ship,u={};return o?o&&(u.backgroundColor=c?"white":"blue",i&&(u.backgroundColor="red",s[o].isSunk&&(u.backgroundColor="black"))):u.backgroundColor=i?"gray":"white",(!1===a||i)&&(u.pointerEvents="none"),Object(O.jsx)("button",{className:"square",style:u,onClick:function(){return t(n)}})},S=function(e){return Object(O.jsx)("div",{className:"board",children:Array(10).fill(null).map((function(a,t){return function(a){var t=10*a,n=Array(10).fill(null).map((function(a,n){var r=t+n;return Object(O.jsx)(f,{coordinate:r,handleClick:e.onClick,clickable:e.clickable,ships:e.ships,position:e.gameboard[r],hideShips:e.hideShips},r)}));return Object(O.jsx)("div",{className:"board-row",children:n},a)}(t)}))})},y=Object(n.memo)(S),v=function(e){var a={name:e};return Object(l.a)(Object(l.a)({data:a},{attack:function(e,a){if(!0!==e.board[a].shot)return e.recieveAttack(a)}}),{computerAttack:function(e){var a=[];for(var t in e.board)e.board[t].shot||a.push(Number(t));var n=a[Math.floor(Math.random()*a.length)];return[function(e,a){if(!0!==e.board[a].shot)return e.recieveAttack(a)}(e,n),n]},randomOpenSpot:function(e){var a=[];for(var t in e)e[t].shot||a.push(Number(t));return a[Math.floor(Math.random()*a.length)]}})},g=function(){var e=Object(n.useState)(0),a=Object(i.a)(e,2),t=a[0],r=a[1],s=Object(n.useState)(!0),c=Object(i.a)(s,2),u=c[0],p=c[1],l=Object(n.useState)(o),h=Object(i.a)(l,2),b=h[0],d=h[1],f=Object(n.useReducer)(j,{players:{computer:{name:"HAL900",board:Array(100).fill(null).map((function(e,a){return{shot:!1,ship:!1}})),ships:{},remainingShips:0},human:{name:"Joel",board:Array(100).fill(null).map((function(e,a){return{shot:!1,ship:!1}})),ships:{},remainingShips:0}},message:"Click on your opponents board to begin!",winner:"",started:!1}),S=Object(i.a)(f,2),g=S[0],E=S[1],A=function(e,a){var t="computer"===e?"Sank enemy ".concat(a):"They sank my ".concat(a);E({id:"UPDATE_REMAINING_SHIPS",player:e,value:-1}),E({id:"SEND_MESSAGE",message:t}),E({id:"SUNK_MESSAGE_SENT",player:e,shipKey:a})},k=function(e,a){var t="computer"===e?"Hit Enemy Ship!":"Enemy hit my Ship!";E({id:"ATTACK_SQUARE",coordinate:a,opponent:e}),g.players[e].board[a].ship?(E({id:"SEND_MESSAGE",message:t}),E({id:"ATTACK_SHIP",coordinate:a,opponent:e})):E({id:"SEND_MESSAGE",message:"Miss!"})};return Object(n.useEffect)((function(){if(0!==b.length){var e=b[0],a=m.randomCoordinates(e,g.players.computer.board);E({id:"PLACE_SHIP",player:"computer",name:e.name,coordinates:a}),E({id:"UPDATE_REMAINING_SHIPS",player:"computer",value:1})}}),[b]),Object(n.useEffect)((function(){for(var e in g.players.computer.ships){var a=g.players.computer.ships[e];a.isSunk&&!a.messageSent&&A("computer",e)}}),[g.players.computer.ships]),Object(n.useEffect)((function(){for(var e in g.players.human.ships){var a=g.players.human.ships[e];a.isSunk&&!a.messageSent&&A("human",e)}}),[g.players.human.ships]),Object(n.useEffect)((function(){if(g.started&&!g.winner){var e=v().randomOpenSpot(g.players.human.board);k("human",e)}}),[t]),Object(n.useEffect)((function(){if(!(t<1||g.winner)){var e=g.players.computer.remainingShips,a=g.players.human.remainingShips;if(0===e||0===a){var n=e?"computer":"human";E({id:"UPDATE_WINNER",winner:n}),E({id:"SEND_MESSAGE",message:"".concat(n," wins!")})}}}),[g.players.computer.remainingShips,g.players.human.remainingShips]),Object(O.jsxs)("div",{children:[Object(O.jsx)("p",{children:g.message}),Object(O.jsx)(y,{gameboard:g.players.human.board,ships:g.players.human.ships,clickable:!g.started,onClick:function(e){if(!g.started){for(var a=b.slice(1,b.length),t=b[0],n=[e],r=1;r<t.length;r++)n.push(e+r);m.validPlacement(n,g.players.human.board)&&(d(a),E({id:"PLACE_SHIP",player:"human",name:t.name,coordinates:n}),E({id:"UPDATE_REMAINING_SHIPS",player:"human",value:1}),0===a.length&&(E({id:"GAME_START",started:!0}),E({id:"SEND_MESSAGE",message:"Game Start!"})))}}}),Object(O.jsx)(y,{gameboard:g.players.computer.board,onClick:function(e){g.winner||(k("computer",e),p(!1),setTimeout((function(){p(!0),r((function(e){return e+1}))}),1))},ships:g.players.computer.ships,clickable:g.started&&u,hideShips:!0})]})},E=function(){return Object(O.jsx)("div",{className:"App",children:Object(O.jsx)(g,{})})},A=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,19)).then((function(a){var t=a.getCLS,n=a.getFID,r=a.getFCP,s=a.getLCP,c=a.getTTFB;t(e),n(e),r(e),s(e),c(e)}))};c.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(E,{})}),document.getElementById("root")),A()}},[[18,1,2]]]);
//# sourceMappingURL=main.a17d6ea2.chunk.js.map